# 4. Dive into PHP :)


## Переменные в PHP: определение, типы данных.

Мы с вами уже освоили вопросы типизаций в целом, теперь переходим к практическому материалу на языке PHP.

**PHP - язык с нестрогой динамической типизацией.**

**Динамическая типизация** означает, что одну и ту же переменную можно сначала инициализировать строкой, потом числом, потом булевым значением, и так далее. Языки со статической типизацией, как язык C, Java, подобного не позволяют.

**Нестрогая типизация** означает, что язык сам пытается менять тип переменной в зависимости от ее использования. К примеру, если прибавить к числу строку, в которой записано число, язык предпримет попытку преобразования строки к числу для правильного суммирования. Если попытка будет успешной, результат может удивить, если не будет - будет выдана ошибка.

## Переменные в PHP: определение, типы данных

**Переменной** называется поименованная область в памяти, где хранятся данные. Переменная имеет тип и имя.
Имена переменных в PHP всегда начинаются со знака доллара. Для того, чтобы создать переменную и записать в нее значение, используется оператор присвоения (=). 
У каждой переменной в php в текущий момент времени может быть только один тип.

**Типом переменной** называется тот вид данных, который на данный момент может хранить переменная.
Все виды данных в языках программирования можно отнести к двум группам: скалярные (простые) типы данных и структурированные (составные) типы данных.


На этом уроке мы работаем только со скалярным типом данных integer (целые числа) и структурированным типом данных string(строка), представляющим собой последовательность символов. Подробнее структурированные типы данных будут рассмотрены на следующих уроках.

Далее представлены переменные различных скалярных (простых) типов:

```php
$my_integer = 4;     //целые числа
$my_float = 4.12;    //дробные числа
$my_str = 'aaa';     //символы
$my_bool = true;     //правда или ложь, булева алгебра

```

## Простейшие математические операции
Над целыми и дробными числами доступны математические операции умножения (+), деления(/), вычитания(-), сложения(+), возведения в степень(**) и получение остатка от деления(%):

```php
$int1 = 4;
$int2 = 8;
$result = $int1 + $int2;  // $result = 12
$result = $int2 - $int1;  // $result = 4
$result = $int1 * $int2;  // $result = 32
$result = $int2 / $int1;  // $result = 2
$result = $int2 ** $int1; // $result = 4096
$result = $int2 % $int1;  // $result = 0
```

## Ввод и вывод данных

Для вывода данных используются функции

`echo, print, print_r, var_dump`

Мы познакомимся с этими функциями позже, пока нам достаточно знать следующее:

```php
$int1 = 4;
$str1 = "8";
echo $int1;   //выведет 4
echo 'text'; //выведет text
echo "text"; //выведет text
echo '$str1';//выведет $str1
echo "$str1";//выведет 8
```


Мы уже знакомились на прошлом уроке с булевым типом данных. Переменная типа `bool` может содержать только два значения: **true** или **false**, при чем это не строки, не числа, а именно понятия ложь и истина.


```php
$bool1 = true;
$bool2 = false;
```  

Для работы с булевыми переменными существует булева алгебра.

## Булева алгебра (логические операторы)

Существуют следующие логические операторы:

* && - И
* || - ИЛИ
* xor - Исключающее ИЛИ
* !  - НЕ

not означает НЕ, и, будучи поставленным перед типом bool, меняет его значение на обратное, т.е. **`not True`** становится **`False`**,**`not False`** становится **`True`**

Далее приведена таблица, демонстрирующая работу операторов:

|             | 0 to 0| 0 to 1| 1 to 0 | 1 to 1|
|-------------|:-----:|:-----:|:------:|:-----:|
| &&          |   0   |   0   |    0   |   1   |
| &#124;&#124;|   0   |   1   |    1   |   1   |
| xor         |   0   |   1   |    1   |   0   |


## Управляющие конструкции
 Простейшая программа выполняется сверху вниз от первой строки к последней. Для того, чтобы изменить порядок выполнения программы, используются управляющие структуры. Существуют управляющие структуры нескольких типов:
 
* операторы условия
* операторы цикла
* операторы подключения других файлов
* операторы для вмешательства в работу цикла или функции прочие операторы
[Полный список](http://php.net/manual/ru/language.control-structures.php)

## Оператор условия if
Существуют следующие операторы условия:

* if -> elseif ->else
* ?: (тернарный оператор)
* switch->case->break

Рассмотрим каждый подробнее на примере конкретного кода:

```php          
<?php

echo "Give it to me!\n";
$handle = fopen ("php://stdin","r");
$number = fgets($handle);

if ($number > 100) {
    echo "Thanks, man!";
} elseif (($number > 10) && ($number < 100)) {
    echo "OK :(";
} else echo "WHAAAAT????";

echo "\n";
if ($number > 1000) echo "\n!!!!WOOOOWWWW!!!\n";

```          

Обратите внимание, мы впервые сталкиваемся с блоком операторов. Так же будет и у циклов, и у функций, и у классов, и у их методов, и так далее. блок операторов начинается со своего инициатора (например, сейчас это блок оператора `if`), после инициатора ставится фигурная скобка, затем все действия, которые программист хочет выполнять в рамках этого блока, он должен выполнять после одного дополнительного отступа. Если отступа не будет, **php** сработает, ошибки не будет, но отступы нужны программисту и его коллегам, чтобы визуально понимать, к какому блоку относится строка кода.

Как видно из листинга, есть возможность применять оператор if в нескольких вариантах. Ниже приведен список всех вариантов:

* if (условие) действие
* if (условие) {блок действий в несколько строк}
* if (условие) {блок действий в несколько строк} else действие
* if (условие) {блок действий в несколько строк} else {блок действий в несколько строк}
* if (условие) {блок действий в несколько строк} elseif(условие) {блок действий в несколько строк} else действие
* if (условие) {блок действий в несколько строк} elseif(условие) {блок действий в несколько строк} else {блок действий в несколько строк}

**Между if и else может быть сколько угодно elseif.**


## Оператор выбора switch

Оператор switch в основном используется в тех случаях, когда в зависимости от содержимого переменной необходимо выполнить более двух вариантов действий, и является альтернативой конструкции if-elseif-elseif....else.:

```php
<?php
echo "Give me the mark!\n";
$handle = fopen ("php://stdin","r");
$mark = fgets($handle);

switch ($mark) {
    case 2:
        echo "I am better!!";
        break;
    case 3:
        echo "OK :(";
        break;
    case 4:
        echo "I am good :)";
        break;
    case 5:
        echo "YeeeeWhaaaa!!!!";
        break;
} 

echo "\n";
```

## Тернарный оператор

Тернарные операторы часто применяются, когда варианта всего два, так как такая запись короче аналогичного действия с `if`. Однако, к сожалению, можно встретить связку `if` и тернарных операторов, которую совершенно невозможно прочесть. Другими словами, это не необходимая вещь в языке и она может стать причиной нечитаемого текста.

Ниже приведен пример тернарного оператора:

```php
<?php

echo "If you are a man, press 1!\n";
$handle = fopen ("php://stdin","r");
$input = fgets($handle);

echo ($input == 1) ? "MAAAN!" : "Hey, girl!"; 

echo "\n";
```

## Особенности сравнения и проверки объектов

В свете того, что **php** является языком с нестрогой динамической типизацией, ему присущи довольно оригинальные выводы, когда дело касается определения, является ли содержимое скобок какого-либо условия правдой или ложью.
**PHP** считает, что если объект не пуст, он `True`, а не `False`. `False` - это собственно сам `False`, 0, пустая строка, пустой массив, `null` и даже строка, в которой записан '0'.

Полный список всех вариантов можно посмотреть по ссылке: [таблицы сравнения типов](http://php.net/manual/ru/types.comparisons.php)

Как извлечь из этого выгоду и как этим пользоваться? Если нам необходимо сравнить строку с пустой строкой, или число с нулем, а так же узнать, является ли пустым тот или иной объект, вместо того, чтобы писать условия в стиле старых языков:

```php
if ($s !='') echo $s;
    
if (9 % 2 != 0) echo 'not zero!';
```

можно слегка их сократить:

```php
if ($s) echo $s;
    
if (9 % 2) echo 'not zero!';
```

Это значительно сокращает и упрощает код.

## Домашка

[Домашнее задание](hw4.md)

[PHP online](https://repl.it/languages/php_cli)